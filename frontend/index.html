<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İşçi Ödeme Takip Sistemi</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <button id="logout-btn" style="float:right;">Çıkış Yap</button>
        <h1>İşçi Ödeme Takip Sistemi - <span id="user-role-display"></span></h1>

        <div id="loading-indicator">
            <h1>Yükleniyor...</h1>
        </div>

        <main id="main-content" style="display: none;">
            <div class="grid-container">
                <div class="form-card" id="cari-form-card">
                    <h2>Yeni Cari Ekle</h2>
                    <form id="cari-form">
                        <input name="cariKod" placeholder="Cari Kodu (*)" required />
                        <input name="unvan" placeholder="Unvan (*)" required />
                        <input name="iban" placeholder="IBAN (*)" required />
                        <input name="bankaAdi" placeholder="Banka Adı" />
                        <button type="submit">Cari Ekle</button>
                    </form>
                </div>

                <div class="form-card" id="employee-form-card">
                    <h2>Yeni Çalışan Ekle</h2>
                    <form id="employee-form">
    <input name="ad" placeholder="Ad (*)" required />
    <input name="soyad" placeholder="Soyad (*)" required />
    
    <input name="tcNo" placeholder="TC Kimlik No" maxlength="11" />
    <input name="departman" placeholder="Departman" />
    <input name="pozisyon" placeholder="Pozisyon" />
    <label>İşe Giriş Tarihi (*)</label>
    <input name="iseGirisTarihi" type="date" required />
    <select name="cariId" required>
        <option value="">Bağlı Olacağı Cari'yi Seçin... (*)</option>
    </select>
    <button type="submit">Çalışan Ekle</button>
</form>
                </div>

                <div class="form-card" id="payment-form-card">
                    <h2>Yeni Ödeme Ekle</h2>
                    <form id="payment-form">
                        <select name="employeeId" required>
                            <option value="">Çalışan Seçin... (*)</option>
                        </select>
                        <input name="tarih" type="date" required />
                        <input name="brutTutar" type="number" step="0.01" placeholder="Brüt Tutar (*)" required />
                        <select name="odemeTuru">
                            <option value="MAAS">Maaş</option>
                            <option value="PRIM">Prim</option>
                            <option value="AVANS">Avans</option>
                        </select>
                        <select name="kasaBankaSecimi">
                            <option value="BANKA">Banka</option>
                            <option value="KASA">Kasa</option>
                        </select>
                        <input name="aciklama" placeholder="Açıklama" />
                        <button type="submit">Öde</button>
                    </form>
                </div>
            </div>

            <div class="lists-container">
                <div class="list-card" id="payment-list-card">
                    <div class="list-header">
                        <h2>Ödeme Geçmişi</h2>
                        <form class="search-form" id="payment-search-form">
                            <input name="isim" type="search" placeholder="Çalışan Adı Ara...">
                            <button type="submit">Ara</button>
                            <button type="reset" class="reset-btn">Sıfırla</button>
                        </form>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Çalışan</th>
                                <th>Ödeme Türü</th>
                                <th>Net Tutar</th>
                                <th>Tarih</th>
                                <th>Kanal</th>
                                <th>Açıklama</th>
                            </tr>
                        </thead>
                        <tbody id="payments-table-body"></tbody>
                    </table>
                </div>

                <div class="list-card" id="cari-list-card">
                     <div class="list-header">
                        <h2>Cariler</h2>
                        <form class="search-form" id="cari-search-form">
                            <input name="unvan" type="search" placeholder="Cari Unvanı Ara...">
                            <button type="submit">Ara</button>
                            <button type="reset" class="reset-btn">Sıfırla</button>
                        </form>
                    </div>
                    <ul id="cariler-list"></ul>
                </div>
            </div>

             <div id="admin-panel" class="list-card" style="display: none; margin-top: 2rem;">
                <h2>Kullanıcı Yönetimi</h2>
                <div class="grid-container">
                    <div class="form-card">
                        <h3>Yeni Kullanıcı Oluştur</h3>
                        <form id="register-form">
                            <input name="username" placeholder="Kullanıcı Adı (*)" required />
                            <input name="password" type="password" placeholder="Şifre (*)" required />
                            <select name="rol" required>
                                <option value="">Rol Seçin...</option>
                                <option value="ik">İnsan Kaynakları</option>
                                <option value="muhasebe">Muhasebe</option>
                                <option value="admin">Admin</option>
                            </select>
                            <button type="submit">Kullanıcı Oluştur</button>
                        </form>
                    </div>
                    <div class="list-card">
                        <h3>Mevcut Kullanıcılar</h3>
                        <ul id="users-list">
                            </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div id="cari-detail-modal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <button class="modal-close-btn" id="modal-close-btn">&times;</button>
            <div id="modal-body"></div>
        </div>
    </div>

  <script src="auth.js"></script>
  <script src="script.js"></script>
</body>
</html>